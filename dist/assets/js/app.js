function saveList(t,e,o){var a=[],e=e||function(){};if(""!==localStorage.todoAppList&&(a=JSON.parse(localStorage.todoAppList)),o){for(var s=a.length-1;s>=0;s--)if(a[s].id===o){for(var i in t)a[s][i]=t[i];break}localStorage.todoAppList=JSON.stringify(a),e.call(this,a)}else t.id=(new Date).getTime().toString(),a.push(t),localStorage.todoAppList=JSON.stringify(a),e.call(this,a)}function loadList(){if(localStorage.todoAppList||localStorage.setItem("todoAppList",""),""!==localStorage.todoAppList){var t=JSON.parse(localStorage.todoAppList);showTask(t)}}function showTask(t){taskList.innerHTML="",t.forEach(function(t){var e=document.createElement("label");e.className="todoApp-list-item-label",e.appendChild(document.createTextNode(t.text));var o=document.createElement("input");o.className="todoApp-list-item-check",o.setAttribute("type","checkbox"),o.addEventListener("click",function(){completeTask(t)});var a=document.createElement("button");a.className="todoApp-list-item-destroy",a.addEventListener("click",function(){removeTask(t.id,showTask)});var s=document.createElement("li");s.id=t.id,s.className="todoApp-list-item",t.completed&&(s.classList.add("completed"),o.setAttribute("checked",!0)),s.appendChild(o),s.appendChild(e),s.appendChild(a),taskList.appendChild(s)})}function addTask(t){var e={text:t,completed:!1};saveList(e,showTask)}function completeTask(t){for(var e=JSON.parse(localStorage.todoAppList),o=e.length-1;o>=0;o--)if(e[o].id===t.id){t.completed?t.completed=!1:t.completed=!0,saveList(t,showTask,t.id);break}}function removeTask(t,e){for(var o=JSON.parse(localStorage.todoAppList),e=e||function(){},a=o.length-1;a>=0;a--)if(o[a].id===t){o.splice(a,1);break}localStorage.todoAppList=JSON.stringify(o),e.call(this,o)}var tasksInput=document.getElementById("new-task-input"),taskList=document.getElementById("task-list");tasksInput.addEventListener("focus",function(){this.parentElement.classList.add("todoApp-newTask-active")}),tasksInput.addEventListener("blur",function(){this.parentElement.classList.remove("todoApp-newTask-active")}),tasksInput.onkeyup=function(t){if(13==t.keyCode){var e=this.value.trim();""!==e&&(addTask(e),this.value="")}},"serviceWorker"in navigator&&(navigator.serviceWorker.register("./sw.js").then(function(t){console.log("Succsessfully regitered service worker",t)}).catch(function(t){console.warn("Error whilst registering service worker",t)}),navigator.serviceWorker.ready.then(function(t){console.log("Service worker ready")})),document.body.onload=loadList;