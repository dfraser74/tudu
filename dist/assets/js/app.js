function saveList(t,e,a){var o=[],e=e||function(){};if(""!==localStorage.todoAppList&&(o=JSON.parse(localStorage.todoAppList)),a){for(var s=o.length-1;s>=0;s--)if(o[s].id===a){for(var i in t)o[s][i]=t[i];break}localStorage.todoAppList=JSON.stringify(o),e.call(this,o)}else t.id=(new Date).getTime().toString(),o.push(t),localStorage.todoAppList=JSON.stringify(o),e.call(this,o)}function loadList(){if(localStorage.todoAppList||(localStorage.todoAppList=""),""!==localStorage.todoAppList){var t=JSON.parse(localStorage.todoAppList);showTask(t)}}function showTask(t){taskList.innerHTML="",t.forEach(function(t){var e=document.createElement("label");e.className="todoApp-list-item-label",e.appendChild(document.createTextNode(t.text));var a=document.createElement("input");a.className="todoApp-list-item-check",a.setAttribute("type","checkbox"),a.addEventListener("click",function(){completeTask(t)});var o=document.createElement("button");o.className="todoApp-list-item-destroy",o.addEventListener("click",function(){removeTask(t.id,showTask)});var s=document.createElement("li");s.id=t.id,s.className="todoApp-list-item",t.completed&&(s.classList.add("completed"),a.setAttribute("checked",!0)),s.appendChild(a),s.appendChild(e),s.appendChild(o),taskList.appendChild(s)})}function addTask(t){var e={text:t,completed:!1};saveList(e,showTask)}function completeTask(t){for(var e=JSON.parse(localStorage.todoAppList),a=e.length-1;a>=0;a--)if(e[a].id===t.id){t.completed?t.completed=!1:t.completed=!0,saveList(t,showTask,t.id);break}}function removeTask(t,e){for(var a=JSON.parse(localStorage.todoAppList),e=e||function(){},o=a.length-1;o>=0;o--)if(a[o].id===t){a.splice(o,1);break}localStorage.todoAppList=JSON.stringify(a),e.call(this,a)}var tasksInput=document.getElementById("new-task-input"),taskList=document.getElementById("task-list");tasksInput.addEventListener("focus",function(){this.parentElement.classList.add("todoApp-newTask-active")}),tasksInput.addEventListener("blur",function(){this.parentElement.classList.remove("todoApp-newTask-active")}),tasksInput.onkeyup=function(t){if(13==t.keyCode){var e=this.value.trim();""!==e&&(addTask(e),this.value="")}},document.body.onload=loadList;